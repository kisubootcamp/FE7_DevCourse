<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8" />
		<title>이벤트 버블링 & 캡처링 예제</title>
		<style>
			body {
				font-family: sans-serif;
			}
			.box {
				padding: 20px;
				border: 2px solid black;
				margin: 10px;
			}
			#outer {
				background: #f8d7da;
			}
			#middle {
				background: #fff3cd;
			}
			#inner {
				background: #d4edda;
			}
		</style>
	</head>
	<body>
		<h1>버블링 vs 캡처링</h1>
		<p>콘솔을 열고 <strong>초록색 박스(inner)</strong>를 클릭해보세요.</p>

		<div id="outer" class="box">
			OUTER
			<div id="middle" class="box">
				MIDDLE
				<div id="inner" class="box">INNER (여기를 클릭!)</div>
			</div>
		</div>

		<script>
			const outer = document.querySelector("#outer");
			outer.addEventListener("click", function () {
				console.log("outer 클릭(버블링)");
			});
			outer.addEventListener(
				"click",
				function () {
					console.log("outer 클릭(캡처링)");
				},
				{ capture: true },
			);

			const middle = document.querySelector("#middle");
			middle.addEventListener("click", function (e) {
				// e.stopPropagation(); // 내부에서 발생하는 이벤트 버블링을 차단
				console.log("middle 클릭(버블링)");
			});
			middle.addEventListener(
				"click",
				function (e) {
					console.log("middle 클릭(캡처링)");
				},
				{ capture: true },
			);

			const inner = document.querySelector("#inner");
			inner.addEventListener("click", function (e) {
				// e.stopPropagation(); // 내부에서 발생하는 이벤트 버블링을 차단
				console.log("inner 클릭(버블링)");
			});
			inner.addEventListener(
				"click",
				function (e) {
					console.log("inner 클릭(캡처링)");
				},
				{ capture: true },
			);

			// 버블링 차단? 좀 불필요하다고 생각해도 어쩔 수 없음 이렇게 해줘야함

			// 캡처링 우선으로 진행하고, 그 다음 버블링이 실행됨
			// 만약 stopPropagation을 삭제하면 캡처링 코드 먼저 실행되고 이후 클릭펑션이 호출됨
		</script>
	</body>
</html>
