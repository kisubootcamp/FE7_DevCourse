<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
		<style>
			body {
				padding: 20px;
			}
			#content {
				border: 1px solid #ccc;
				padding: 20px;
				margin-top: 10px;
				border-radius: 6px;
			}
			button {
				margin-right: 8px;
				padding: 6px 12px;
			}
		</style>
	</head>
	<body>
		<h1>History API 학습 예제</h1>
		<p>
			아래 버튼을 눌러 페이지 상태를 바꾸고, 브라우저
			<strong>뒤로/앞으로 버튼</strong>도 눌러보세요!
		</p>
		<button onclick="loadPage('home')">홈</button>
		<button onclick="loadPage('about')">소개</button>
		<button onclick="loadPage('contact')">연락처</button>
		<div id="content">여기는 기본 홈 화면입니다.</div>
		<script>
			const content = document.querySelector("#content");
			async function loadPage(page) {
				const texts = {
					home: "../../learn-js/17/pages/home.html",
					about: "../../learn-js/17/pages/about.html",
					contact: "../../learn-js/17/pages/contact.html",
				};
				const res = await fetch(texts[page]);
				content.innerText = await res.text(); // text()는 텍스트형식으로 받아냄
				history.pushState({ page: page }, null, `/${page}`);
			}

			window.addEventListener("popstate", function (event) {
				console.log(event);
				const page = event.state?.page || "home";
				const texts = {
					home: "여기는 홈 화면 입니다",
					about: "여기는 소개 화면 입니다",
					contact: "여기는 연락처 화면 입니다",
				};
				content.innerText = texts[page];
			});

			// 연결은 되는데 새로고침시 다시 돌아가야함
			// 그건 서버가 해결해줘야함
		</script>
	</body>
</html>
